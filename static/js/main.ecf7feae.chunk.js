(this["webpackJsonponline-store"]=this["webpackJsonponline-store"]||[]).push([[0],{21:function(t,e,s){},22:function(t,e,s){},29:function(t,e,s){},30:function(t,e,s){},31:function(t,e,s){},32:function(t,e,s){},33:function(t,e,s){},34:function(t,e,s){"use strict";s.r(e);var a=s(1),c=s.n(a),i=s(15),n=s.n(i),r=s(4),l=s(2),o=(s(21),s(12)),d=(s(22),s(0));class h extends a.Component{constructor(){super(),this.searchOnKeyDown=t=>{let{keyCode:e}=t;13===e&&document.querySelector("button.search-btn").click()},this.handleChange=this.handleChange.bind(this),this.handleClick=this.handleClick.bind(this),this.state={valueQuery:"",redirect:!1}}handleChange(t){let{target:e}=t;this.setState({valueQuery:e.value})}handleClick(){const{callback:t}=this.props,{valueQuery:e}=this.state;t(e),this.setState({valueQuery:"",redirect:!0},()=>{this.setState({redirect:!1})})}mensagemInicial(){return Object(d.jsx)("p",{"data-testid":"home-initial-message",children:"Digite algum termo de pesquisa ou escolha uma categoria."})}render(){const{state:{valueQuery:t,redirect:e},props:{condition:s}}=this;return Object(d.jsxs)("section",{className:"search-area",children:[e&&Object(d.jsx)(l.a,{to:"/online-store"}),Object(d.jsxs)("div",{children:[Object(d.jsx)("input",{type:"text",className:"search-input","data-testid":"query-input",value:t,onChange:this.handleChange,onKeyDown:this.searchOnKeyDown}),Object(d.jsx)("button",{type:"button",className:"search-btn","data-testid":"query-button",onClick:this.handleClick,disabled:!t,children:"Pesquisar"})]}),!s&&Object(d.jsx)("div",{className:"initial-msg",children:this.mensagemInicial()})]})}}var j=s.p+"static/media/cart.4a8eb25f.svg";s(29);class u extends c.a.Component{render(){const{itemsAdd:t,callback:e,removeItemCart:s}=this.props;return Object(d.jsxs)("div",{className:"cart-items",children:[Object(d.jsxs)("span",{className:"cart-items-title",children:[Object(d.jsx)("img",{className:"icon-cart",src:j,alt:"Carrinho de Compras"}),Object(d.jsx)("h4",{children:"Carrinho de Compras"})]}),0===t.length?Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{className:"cart-empty-message","data-testid":"shopping-cart-empty-message",children:"Seu carrinho est\xe1 vazio"}),Object(d.jsx)(r.b,{to:"/online-store",children:Object(d.jsx)("button",{className:"button-add-more-items",type:"button",children:"Adicionar Itens"})})]}):Object(d.jsxs)("div",{children:[Object(d.jsx)("ul",{className:"separator",children:t.map(t=>Object(d.jsxs)("li",{className:"item-cart",children:[Object(d.jsx)("img",{className:"image-item-cart",src:t.thumbnail,alt:t.title}),Object(d.jsx)("h4",{className:"text-item-cart","data-testid":"shopping-cart-product-name",children:t.title}),Object(d.jsxs)("div",{className:"order-details",children:[Object(d.jsxs)("span",{className:"quantity",children:[t.quantity>1?Object(d.jsx)("button",{className:"moviment-quantity","data-testid":"product-decrease-quantity",type:"button",onClick:()=>{e(t,!0)},children:"-"}):Object(d.jsx)("button",{className:"remove-item",type:"button",onClick:()=>{s(t.id)},children:"X"}),Object(d.jsx)("h4",{className:"text-quantity","data-testid":"shopping-cart-product-quantity",children:t.quantity}),Object(d.jsx)("button",{className:"moviment-quantity","data-testid":"product-increase-quantity",type:"button",onClick:()=>{e(t)},disabled:t.quantity+1>t.available_quantity,children:"+"})]}),Object(d.jsx)("h4",{className:"text-price-item",children:Intl.NumberFormat("pt-br",{style:"currency",currency:"BRL"}).format(t.price*t.quantity)})]})]},t.id))}),Object(d.jsxs)("div",{className:"price-total",children:[Object(d.jsx)("div",{className:"completed-shopping",children:Object(d.jsx)(r.b,{to:"/online-store",children:Object(d.jsx)("button",{className:"button-add-more-items",type:"button",children:"Adicionar Mais Itens"})})}),Object(d.jsxs)("div",{className:"completed-shopping",children:[Object(d.jsx)("h2",{children:"Valor Total: ".concat(Intl.NumberFormat("pt-br",{style:"currency",currency:"BRL"}).format(t.reduce((t,e)=>{let{price:s,quantity:a}=e;return t+s*a},0)))}),Object(d.jsx)(r.b,{to:"/online-store/checkout",children:Object(d.jsx)("button",{className:"button-add-more-items",type:"button","data-testid":"checkout-products",children:"Finalizar Compra"})})]})]})]})]})}}s(30);class m extends a.Component{constructor(t){super(),this.handleClick=t=>{const{callback:e}=this.props;e(t)},this.handleOpen=t=>{this.setState(t=>({isOpen:!t.isOpen}),()=>{t&&this.handleClick(t)})};const{items:e}=t;this.state={categories:e,isOpen:window.innerWidth>768}}render(){const{categories:t,isOpen:e}=this.state;return Object(d.jsxs)("aside",{className:"categories-aside",children:[Object(d.jsxs)("p",{onClick:this.handleOpen,children:["Categorias ",e?"\u25b2":"\u25bc"]}),e&&Object(d.jsx)("ul",{className:"categories-list",children:t.map(t=>{let{slug:e,name:s}=t;return Object(d.jsx)(r.b,{to:"/online-store/",onClick:()=>this.handleOpen(e),children:Object(d.jsx)("li",{className:"categories-item","aria-hidden":"true","data-testid":"category",children:Object(d.jsx)("p",{id:e,children:s})})},e)})})]})}}class b extends c.a.Component{render(){const{productDetails:{category:t,id:e}}=this.props;return Object(d.jsx)(r.b,{to:"/online-store/product/".concat(t,"/").concat(e),params:{test:1},children:Object(d.jsx)("button",{type:"button","data-testid":"product-detail-link",children:"Mais detalhes"})})}}var p=b;class x extends c.a.Component{constructor(t){super(t),this.state={}}render(){const{productDetails:t,callback:e,dataTestid:s}=this.props;return Object(d.jsx)("button",{type:"button",className:"cart-button-add-cart","data-testid":s,onClick:()=>e(t),children:"Adicionar ao Carrinho"})}}class O extends a.Component{render(){const{searchResults:t,callback:e}=this.props;return Object(d.jsx)("section",{className:"list-products",children:t.length>0?Object(d.jsx)("ul",{children:t.map(t=>Object(d.jsxs)("li",{"data-testid":"product",children:[Object(d.jsx)("h4",{children:t.title.length>45?"".concat(t.title.match(/.{45}/)[0],"..."):t.title}),Object(d.jsx)("img",{className:"product-img",src:t.thumbnail,alt:t.title}),Object(d.jsx)("p",{className:"product-price",children:Intl.NumberFormat("pt-br",{style:"currency",currency:"BRL"}).format(t.price)}),Number(t.rating)>4&&Object(d.jsx)("h4",{className:"free-shipping","data-testid":"free-shipping",children:"Super Oferta"}),Object(d.jsx)(p,{productDetails:t}),Object(d.jsx)(x,{dataTestid:"product-add-to-cart",callback:e,productDetails:t})]},t.id))}):Object(d.jsx)("p",{className:"initial-msg",children:"Nenhum produto foi encontrado"})})}}s(31);class g extends c.a.Component{constructor(){super(),this.handleClick=t=>{let{target:e}=t;const{value:s}=e;this.setState({evaluation:s}),document.querySelectorAll(".eval-radio-input").forEach(t=>{t.checked=!1,t.value<=s&&(t.checked=!0)})},this.handleChange=t=>{let{target:e}=t;const{name:s,value:a}=e;this.setState({[s]:a})},this.submitAndCleanState=()=>{const{name:t,evaluation:e,comment:s}=this.state;if([t,e,s].some(t=>!t))return;const{id:a,submitForm:c}=this.props;c(a,this.state),this.setState({name:"",evaluation:"",comment:""}),document.querySelectorAll(".eval-radio-input").forEach(t=>{t.checked=!1})},this.state={name:"",evaluation:"",comment:""}}render(){const{name:t,evaluation:e,comment:s}=this.state;return Object(d.jsxs)("form",{className:"evaluation-form",children:["Deixe sua avalia\xe7\xe3o:",Object(d.jsxs)("div",{children:[Object(d.jsx)("input",{type:"text",name:"name",value:t,className:"eval-email",onChange:this.handleChange,placeholder:"Nome"}),Object(d.jsx)("p",{children:"Sua avalia\xe7\xe3o: ".concat(e)}),Object(d.jsxs)("label",{htmlFor:"radio1",children:[Object(d.jsx)("input",{type:"radio",id:"radio1",className:"eval-radio-input",onClick:this.handleClick,value:"1"}),Object(d.jsx)("b",{className:"eval-star"})]}),Object(d.jsxs)("label",{htmlFor:"radio2",children:[Object(d.jsx)("input",{type:"radio",id:"radio2",className:"eval-radio-input",onClick:this.handleClick,value:"2"}),Object(d.jsx)("b",{className:"eval-star"})]}),Object(d.jsxs)("label",{htmlFor:"radio3",children:[Object(d.jsx)("input",{type:"radio",id:"radio3",className:"eval-radio-input",onClick:this.handleClick,value:"3"}),Object(d.jsx)("b",{className:"eval-star"})]}),Object(d.jsxs)("label",{htmlFor:"radio4",children:[Object(d.jsx)("input",{type:"radio",id:"radio4",className:"eval-radio-input",onClick:this.handleClick,value:"4"}),Object(d.jsx)("b",{className:"eval-star"})]}),Object(d.jsxs)("label",{htmlFor:"radio5",children:[Object(d.jsx)("input",{type:"radio",id:"radio5",className:"eval-radio-input",onClick:this.handleClick,value:"5"}),Object(d.jsx)("b",{className:"eval-star"})]})]}),Object(d.jsx)("div",{children:Object(d.jsx)("textarea",{name:"comment",value:s,onChange:this.handleChange,"data-testid":"product-detail-evaluation"})}),Object(d.jsx)("button",{type:"button",onClick:this.submitAndCleanState,children:"Avaliar"})]})}}var v=g;class y extends c.a.Component{render(){return Object(d.jsxs)("div",{className:"loading",children:[Object(d.jsx)("span",{children:"Aguarde... "}),Object(d.jsx)("img",{src:j,alt:"Carrinho de compras"})]})}}class N extends a.Component{render(){const{evaluation:t}=this.props;return Object(d.jsxs)("div",{children:[Object(d.jsx)("span",{className:t>=1?"yellowStar":"whiteStar",children:"\u2605"}),Object(d.jsx)("span",{className:t>=2?"yellowStar":"whiteStar",children:"\u2605"}),Object(d.jsx)("span",{className:t>=3?"yellowStar":"whiteStar",children:"\u2605"}),Object(d.jsx)("span",{className:t>=4?"yellowStar":"whiteStar",children:"\u2605"}),Object(d.jsx)("span",{className:t>=5?"yellowStar":"whiteStar",children:"\u2605"})]})}}class C extends c.a.Component{constructor(){super(),this.fethProduct=this.fethProduct.bind(this),this.state={prodDetails:null,loading:!1}}componentDidMount(){this.fethProduct()}async fethProduct(){const{match:{params:{id:t}}}=this.props,e=await async function(t){const e=await fetch("https://dummyjson.com/products/".concat(t));return await e.json()}(t);this.setState({prodDetails:e},()=>this.setState({loading:!0}))}render(){var t,e;const{prodDetails:s,loading:a}=this.state,{callback:c,submitForm:i,allEvaluation:n}=this.props,{match:{params:{id:l}}}=this.props;let o=[];return n.length>=1&&(o=n.filter(t=>t.id===l)),a&&!s?Object(d.jsx)("div",{children:"Desculpe. N\xe3o foi poss\xedvel encontrar os detalhes deste produto."}):a?Object(d.jsxs)("section",{className:"product-details",children:[Object(d.jsx)(r.b,{className:"back-details",to:"/online-store",children:"\u21b6"}),Object(d.jsx)("div",{className:"details-div-content",children:Object(d.jsxs)("h1",{"data-testid":"product-detail-name",children:[Object(d.jsx)("span",{children:s.title}),Object(d.jsx)("span",{children:" - "}),Object(d.jsx)("span",{children:Intl.NumberFormat("pt-br",{style:"currency",currency:"BRL"}).format(s.price)})]})}),Object(d.jsx)("div",{className:"details-div-content",children:Object(d.jsxs)("div",{className:"product-info-details",children:[Object(d.jsxs)("div",{children:[s.brand&&Object(d.jsxs)("p",{children:[Object(d.jsx)("h3",{children:"Marca:"}),Object(d.jsx)("span",{children:s.brand})]}),s.category&&Object(d.jsxs)("p",{children:[Object(d.jsx)("h3",{children:"Categoria:"}),Object(d.jsx)("span",{children:s.category})]}),Object(d.jsxs)("p",{children:[Object(d.jsx)("h3",{children:"Tags:"}),Object(d.jsx)("ul",{style:{marginBlock:0},children:null===(t=s.tags)||void 0===t?void 0:t.map(t=>Object(d.jsx)("li",{children:t},t))})]}),Number(s.rating)>4&&Object(d.jsx)("h4",{"data-testid":"free-shipping",children:Object(d.jsx)("code",{children:"Satisfa\xe7\xe3o Garantida!"})}),Object(d.jsx)(x,{dataTestid:"product-detail-add-to-cart",productDetails:s,callback:c})]}),Object(d.jsx)("img",{src:s.thumbnail,alt:s.title})]})}),Object(d.jsxs)("div",{className:"details-div-content",children:[Object(d.jsx)("h3",{children:"Avalia\xe7\xf5es"}),s.reviews.length>0?[...s.reviews,...(null===(e=o[0])||void 0===e?void 0:e.comments)||[]].map((t,e)=>{let{evaluation:s,rating:a,comment:c,reviewerName:i,name:n}=t;return Object(d.jsxs)("div",{className:"eval-coments",children:[Object(d.jsx)("h4",{children:i||n}),Object(d.jsx)("p",{children:c}),Object(d.jsx)(N,{evaluation:a||s})]},"".concat(e).concat(i||n))}):Object(d.jsx)("div",{className:"eval-coments",children:"Ainda n\xe3o h\xe1 avalia\xe7\xf5es para este item. Seja o primeiro!"}),Object(d.jsx)(v,{id:l,submitForm:i})]})]}):Object(d.jsx)(y,{})}}var k=C;s(32);class f extends c.a.Component{constructor(){super(),this.handleClick=t=>{t.preventDefault(),this.setState({finish:!0}),this.props.finish()},this.state={finish:!1}}render(){const{props:{cartItems:t},state:{finish:e}}=this;return Object(d.jsxs)("section",{className:"checkout",children:[Object(d.jsx)("div",{className:"checkout-list",children:t.map(t=>{let{thumbnail:e,id:s,title:a,price:c,quantity:i}=t;return Object(d.jsxs)("div",{className:"checkout-items",children:[Object(d.jsx)("h5",{children:a}),Object(d.jsx)("img",{src:e,alt:a}),Object(d.jsxs)("p",{children:[Intl.NumberFormat("pt-br",{style:"currency",currency:"BRL"}).format(c),Object(d.jsx)("b",{children:" X "}),i]})]},s)})}),Object(d.jsxs)("form",{className:"checkout-form",onSubmit:this.handleClick,children:[Object(d.jsxs)("label",{className:"checkout-inputs",htmlFor:"fullname",children:["Nome:",Object(d.jsx)("input",{id:"fullname",type:"text","data-testid":"checkout-fullname",required:!0})]}),Object(d.jsxs)("label",{className:"checkout-inputs",htmlFor:"email",children:["Email:",Object(d.jsx)("input",{id:"email",type:"email","data-testid":"checkout-email",required:!0})]}),Object(d.jsxs)("label",{className:"checkout-inputs",htmlFor:"cpf",children:["CPF:",Object(d.jsx)("input",{id:"cpf",type:"number","data-testid":"checkout-cpf",required:!0})]}),Object(d.jsxs)("label",{className:"checkout-inputs",htmlFor:"phone",children:["Telefone:",Object(d.jsx)("input",{id:"phone",type:"number","data-testid":"checkout-phone",required:!0})]}),Object(d.jsxs)("label",{className:"checkout-inputs",htmlFor:"cep",children:["CEP:",Object(d.jsx)("input",{id:"cep",type:"number","data-testid":"checkout-cep",required:!0})]}),Object(d.jsxs)("label",{className:"checkout-inputs",htmlFor:"address",children:["Endere\xe7o:",Object(d.jsx)("input",{id:"address",type:"text","data-testid":"checkout-address",required:!0})]}),Object(d.jsx)("button",{type:"submit",children:"Finalizar"})]}),e&&Object(d.jsx)(l.a,{to:"/online-store"})]})}}class S extends c.a.Component{render(){const{items:t}=this.props,e=t.reduce((t,e)=>t+e.quantity,0);return Object(d.jsxs)("button",{type:"button",className:"cart-button",children:[Object(d.jsx)(r.b,{"data-testid":"shopping-cart-button",to:"/online-store/cart-items",children:Object(d.jsx)("img",{className:"iconCart",src:j,alt:"Carrinho de Compras"})}),e>0&&Object(d.jsx)("span",{"data-testid":"shopping-cart-size",children:e})]})}}var q=s.p+"static/media/logo_tos.35c499fd.png";s(33);class w extends c.a.Component{render(){const{items:t}=this.props;return Object(d.jsxs)("header",{children:[Object(d.jsx)("img",{className:"tos-logo",src:q,alt:"Logo Trybers Online Store"}),Object(d.jsx)("h3",{children:"Trybers Online Store"}),Object(d.jsx)(S,{items:t})]})}}class I extends a.Component{constructor(){super(),this.handleClick=(t,e)=>{const{title:s,thumbnail:a,id:c,price:i,available_quantity:n}=t,{getProducts:r}=this.state;let l,o;if(r.some(t=>t.id===c)){let t;const l=r.filter((e,s)=>(e.id===c&&(t=s),e.id===c))[0],d=e?l.quantity-1:l.quantity+1;if(d>n)return;o=[...r],o.splice(t,1,{thumbnail:a,id:c,title:s,price:i,quantity:d,available_quantity:n})}else l={thumbnail:a,id:c,title:s,price:i,quantity:1,available_quantity:n},o=[...r,l];this.setState({getProducts:o},()=>{localStorage.setItem("getProducts",JSON.stringify(o))})},this.removeItemCart=t=>{const e=JSON.parse(localStorage.getItem("getProducts")).filter(e=>{let{id:s}=e;return t!==s});localStorage.setItem("getProducts",JSON.stringify(e)),this.loadLocalStorage()},this.filterCategory=t=>{this.setState({searched:!1,isLoading:!0}),async function(t){const e=await fetch("https://dummyjson.com/products/category/".concat(t));return await e.json()}(t).then(t=>{let{products:e}=t;return this.setState({searched:!0,isLoading:!1,searchResults:e})})},this.searchItems=t=>{this.setState({searched:!1,isLoading:!0}),async function(t){const e=await fetch("https://dummyjson.com/products/search?q=".concat(t));return await e.json()}(t).then(t=>{let{products:e}=t;return this.setState({searched:!0,isLoading:!1,searchResults:e})})},this.saveEvaluation=(t,e)=>{const{allEvaluation:s}=this.state,{name:a,evaluation:c,comment:i}=e,n=s.filter(e=>e.id===t);if(n.length>=1){const e=n[0].comments;e.push({name:a,evaluation:c,comment:i});const r={id:t,comments:e},l=s.filter(e=>e.id!==t);l.push(r),this.setState({allEvaluation:l},()=>{localStorage.setItem("evaluationStorage",JSON.stringify(s))})}else{const e={id:t,comments:[{name:a,evaluation:c,comment:i}]};s.push(e),this.setState({allEvaluation:s},()=>{localStorage.setItem("evaluationStorage",JSON.stringify(s))})}},this.finishShop=()=>{this.setState({getProducts:[]}),localStorage.removeItem("getProducts")},this.state={loaded:!1,categoriesBar:[],isLoading:!1,searched:!1,searchResults:[],getProducts:[],allEvaluation:[]}}componentDidMount(){(async function(){const t=await fetch("https://dummyjson.com/products/categories");return await t.json()})().then(t=>this.setState({categoriesBar:t,loaded:!0})),this.loadLocalStorage()}loadLocalStorage(){localStorage.getItem("getProducts")&&this.setState({getProducts:JSON.parse(localStorage.getItem("getProducts"))}),localStorage.getItem("evaluationStorage")&&this.setState({allEvaluation:JSON.parse(localStorage.getItem("evaluationStorage"))})}render(){const{categoriesBar:t,loaded:e,searched:s,isLoading:a,searchResults:c,getProducts:i,allEvaluation:n}=this.state;return Object(d.jsx)("main",{children:Object(d.jsx)(r.a,{children:Object(d.jsxs)(l.d,{children:[Object(d.jsx)(l.b,{exact:!0,path:"/online-store",render:()=>Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(w,{items:i}),Object(d.jsx)("div",{className:"categories-div",children:e&&Object(d.jsx)(m,{items:t,callback:this.filterCategory})}),Object(d.jsxs)("div",{className:"main-div",children:[Object(d.jsx)("nav",{children:Object(d.jsx)(h,{callback:this.searchItems,condition:s})}),a&&Object(d.jsx)(y,{}),s&&Object(d.jsx)(O,{callback:this.handleClick,searchResults:c})]})]})}),Object(d.jsxs)(l.b,{path:"/online-store/cart-items",children:[Object(d.jsx)(w,{items:i}),Object(d.jsx)(u,{itemsAdd:i,callback:this.handleClick,removeItemCart:this.removeItemCart})]}),Object(d.jsx)(l.b,{path:"/online-store/product/:categoryId/:id",render:a=>Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(w,{items:i}),Object(d.jsx)("div",{className:"categories-div",children:e&&Object(d.jsx)(m,{items:t,callback:this.searchItems})}),Object(d.jsxs)("div",{className:"main-div",children:[Object(d.jsx)("nav",{children:Object(d.jsx)(h,{callback:this.searchItems,condition:s})}),Object(d.jsx)(k,Object(o.a)(Object(o.a)({},a),{},{callback:this.handleClick,submitForm:this.saveEvaluation,allEvaluation:n,items:i}))]})]})}),Object(d.jsxs)(l.b,{path:"/online-store/checkout",children:[Object(d.jsx)(w,{items:i}),Object(d.jsx)(f,{cartItems:i,finish:this.finishShop})]})]})})})}}var F=I;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(r.a,{children:Object(d.jsx)(l.b,{component:F})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(t=>{t.unregister()}).catch(t=>{console.error(t.message)})}},[[34,1,2]]]);
//# sourceMappingURL=main.ecf7feae.chunk.js.map